<!doctype html>
<html>
<head>
    <title>Socket.IO chat</title>

    <link rel="stylesheet" href="rover.css"/>
    <link rel="stylesheet" href="chat.css"/>
</head>
<body>


<div align="center">

    <img id="imagestream" src=""/>

    <table class="button" padding=5>
        <tr align="center">
            <td></td><!--<td id="FL" class="button">FL</td>-->
            <td id="button_fwd" class="button">F</td>
            <td></td><!--<td id="FR" class="button">FR</td>-->
        </tr>
        <tr align="center">
            <td id="button_left" class="button">L</td>
            <td id="button_stop" class="button">S</td>
            <td id="button_right" class="button">R</td>
        </tr>
        <tr align="center">
            <td></td><!--<td id="RL" class="button">RL</td>-->
            <td id="button_bwd" class="button">B</td>
            <td></td><!--<td id="RR" class="button">RR</td>-->
        </tr>
    </table>
</div>
<div id="status2" align="center"></div>


<div id="chat">
    <ul id="messages"></ul>

</div>

<form id="text_input" action="">
    <input id="m" autocomplete="off"/>
    <button>Send</button>
</form>


<script src="js/socket.io.js"></script>
<script src="https://code.jquery.com/jquery-1.11.1.js"></script>
<script>
  $(function () {
    var socket = io();
    $('form').submit(function () {
      socket.emit('chat message', $('#m').val());
      $('#m').val('');
      return false;
    });
    socket.on('chat message', function (msg) {
      $('#messages').append($('<li>').text(msg));
      scrollToBottom($('#chat'));
    });

    socket.on('command', function (msg) {
      $('#messages').append($('<li>').text('command: ' + msg));
      scrollToBottom($('#chat'));
    });
  });

  function scrollToBottom(element) {
    element.scrollTop(element[0].scrollHeight);
  }
</script>
<script>
  var socket = io();
  $("#button_fwd").on("mousedown", fwd);
  $("#button_fwd").on("mouseup", stop);
  $("#button_fwd").on("mouseout", stop);

  $("#button_bwd").on("mousedown", bwd);
  $("#button_bwd").on("mouseup", stop);
  $("#button_bwd").on("mouseout", stop);

  $("#button_left").on("mousedown", left);
  $("#button_left").on("mouseup", stop);
  $("#button_left").on("mouseout", stop);

  $("#button_right").on("mousedown", right);
  $("#button_right").on("mouseup", stop);
  $("#button_right").on("mouseout", stop);

  $("#button_stop").on("mousedown", stop);


  function fwd() {
    socket.emit('command', 'fwd');
  }

  function bwd() {
    socket.emit('command', 'bwd');
  }

  function left() {
    socket.emit('command', 'left');
  }

  function right() {
    socket.emit('command', 'right');
  }

  function stop() {
    socket.emit('command', 'stop');
  }

</script>
</body>
</html>
